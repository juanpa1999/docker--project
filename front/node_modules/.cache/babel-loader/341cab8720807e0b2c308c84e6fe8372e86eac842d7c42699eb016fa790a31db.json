{"ast":null,"code":"var _jsxFileName = \"/usr/src/app/src/ProtectedRoute.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect } from \"react\";\nimport { Navigate, useLocation } from \"react-router-dom\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction ProtectedRoute({\n  element: Component\n}) {\n  _s();\n  const location = useLocation();\n  const isAuthenticated = localStorage.getItem(\"access_token\");\n  useEffect(() => {\n    const interceptor = axios.interceptors.response.use(response => response, error => {\n      if (error.response && (error.response.status === 401 || error.response.status === 403)) {\n        localStorage.removeItem(\"access_token\");\n        window.location = \"/Login\";\n      }\n      return Promise.reject(error);\n    });\n    return () => {\n      // Elimina el interceptor cuando el componente se desmonte\n      axios.interceptors.response.eject(interceptor);\n    };\n  }, []);\n  const isTokenExpired = () => {\n    const token = localStorage.getItem(\"access_token\");\n    if (!token) return true;\n    const decodedToken = JSON.parse(atob(token.split('.')[1]));\n    const expDate = new Date(decodedToken.exp * 1000); // Convertir el tiempo Unix a una fecha JavaScript\n    console.log(\"Fecha de expiración del token:\", expDate);\n    return decodedToken.exp < Date.now() / 1000;\n  };\n  if (!isAuthenticated || isTokenExpired()) {\n    // Si no está autenticado o el token ha expirado, redirecciona a la página de inicio de sesión\n    return /*#__PURE__*/_jsxDEV(Navigate, {\n      to: \"/Login\",\n      state: {\n        from: location\n      },\n      replace: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(Component, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 44,\n    columnNumber: 10\n  }, this);\n}\n_s(ProtectedRoute, \"BXcZrDMM76mmm4zA8/QV5UbMNXE=\", false, function () {\n  return [useLocation];\n});\n_c = ProtectedRoute;\nexport default ProtectedRoute;\nvar _c;\n$RefreshReg$(_c, \"ProtectedRoute\");","map":{"version":3,"names":["React","useEffect","Navigate","useLocation","axios","jsxDEV","_jsxDEV","ProtectedRoute","element","Component","_s","location","isAuthenticated","localStorage","getItem","interceptor","interceptors","response","use","error","status","removeItem","window","Promise","reject","eject","isTokenExpired","token","decodedToken","JSON","parse","atob","split","expDate","Date","exp","console","log","now","to","state","from","replace","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/usr/src/app/src/ProtectedRoute.js"],"sourcesContent":["import React, { useEffect } from \"react\";\nimport { Navigate, useLocation } from \"react-router-dom\";\nimport axios from \"axios\";\n\nfunction ProtectedRoute({ element: Component }) {\n  const location = useLocation();\n  const isAuthenticated = localStorage.getItem(\"access_token\");\n\n  useEffect(() => {\n    const interceptor = axios.interceptors.response.use(\n      (response) => response,\n      (error) => {\n        if (\n          error.response &&\n          (error.response.status === 401 || error.response.status === 403)\n        ) {\n          localStorage.removeItem(\"access_token\");\n          window.location = \"/Login\";\n        }\n        return Promise.reject(error);\n      }\n    );\n\n    return () => {\n      // Elimina el interceptor cuando el componente se desmonte\n      axios.interceptors.response.eject(interceptor);\n    };\n  }, []);\n\n  const isTokenExpired = () => {\n    const token = localStorage.getItem(\"access_token\");\n    if (!token) return true;\n    const decodedToken = JSON.parse(atob(token.split('.')[1]));\n    const expDate = new Date(decodedToken.exp * 1000); // Convertir el tiempo Unix a una fecha JavaScript\n    console.log(\"Fecha de expiración del token:\", expDate);\n    return decodedToken.exp < Date.now() / 1000;\n  };\n\n  if (!isAuthenticated || isTokenExpired()) {\n    // Si no está autenticado o el token ha expirado, redirecciona a la página de inicio de sesión\n    return <Navigate to=\"/Login\" state={{ from: location }} replace />;\n  }\n\n  return <Component />;\n}\n\nexport default ProtectedRoute;\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,QAAQ,OAAO;AACxC,SAASC,QAAQ,EAAEC,WAAW,QAAQ,kBAAkB;AACxD,OAAOC,KAAK,MAAM,OAAO;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE1B,SAASC,cAAcA,CAAC;EAAEC,OAAO,EAAEC;AAAU,CAAC,EAAE;EAAAC,EAAA;EAC9C,MAAMC,QAAQ,GAAGR,WAAW,CAAC,CAAC;EAC9B,MAAMS,eAAe,GAAGC,YAAY,CAACC,OAAO,CAAC,cAAc,CAAC;EAE5Db,SAAS,CAAC,MAAM;IACd,MAAMc,WAAW,GAAGX,KAAK,CAACY,YAAY,CAACC,QAAQ,CAACC,GAAG,CAChDD,QAAQ,IAAKA,QAAQ,EACrBE,KAAK,IAAK;MACT,IACEA,KAAK,CAACF,QAAQ,KACbE,KAAK,CAACF,QAAQ,CAACG,MAAM,KAAK,GAAG,IAAID,KAAK,CAACF,QAAQ,CAACG,MAAM,KAAK,GAAG,CAAC,EAChE;QACAP,YAAY,CAACQ,UAAU,CAAC,cAAc,CAAC;QACvCC,MAAM,CAACX,QAAQ,GAAG,QAAQ;MAC5B;MACA,OAAOY,OAAO,CAACC,MAAM,CAACL,KAAK,CAAC;IAC9B,CACF,CAAC;IAED,OAAO,MAAM;MACX;MACAf,KAAK,CAACY,YAAY,CAACC,QAAQ,CAACQ,KAAK,CAACV,WAAW,CAAC;IAChD,CAAC;EACH,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMW,cAAc,GAAGA,CAAA,KAAM;IAC3B,MAAMC,KAAK,GAAGd,YAAY,CAACC,OAAO,CAAC,cAAc,CAAC;IAClD,IAAI,CAACa,KAAK,EAAE,OAAO,IAAI;IACvB,MAAMC,YAAY,GAAGC,IAAI,CAACC,KAAK,CAACC,IAAI,CAACJ,KAAK,CAACK,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IAC1D,MAAMC,OAAO,GAAG,IAAIC,IAAI,CAACN,YAAY,CAACO,GAAG,GAAG,IAAI,CAAC,CAAC,CAAC;IACnDC,OAAO,CAACC,GAAG,CAAC,gCAAgC,EAAEJ,OAAO,CAAC;IACtD,OAAOL,YAAY,CAACO,GAAG,GAAGD,IAAI,CAACI,GAAG,CAAC,CAAC,GAAG,IAAI;EAC7C,CAAC;EAED,IAAI,CAAC1B,eAAe,IAAIc,cAAc,CAAC,CAAC,EAAE;IACxC;IACA,oBAAOpB,OAAA,CAACJ,QAAQ;MAACqC,EAAE,EAAC,QAAQ;MAACC,KAAK,EAAE;QAAEC,IAAI,EAAE9B;MAAS,CAAE;MAAC+B,OAAO;IAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC;EACpE;EAEA,oBAAOxC,OAAA,CAACG,SAAS;IAAAkC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAE,CAAC;AACtB;AAACpC,EAAA,CAxCQH,cAAc;EAAA,QACJJ,WAAW;AAAA;AAAA4C,EAAA,GADrBxC,cAAc;AA0CvB,eAAeA,cAAc;AAAC,IAAAwC,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}